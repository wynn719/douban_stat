webpackJsonp([2,0],{0:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var n=a(478),s=o(n),r=a(470),i=o(r),c=a(476),u=o(c);s["default"].use(u["default"]),s["default"].http.options.root="https://api.douban.com",new s["default"]({el:"body",ready:function(){},components:{App:i["default"]}})},163:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(204),s=o(n),r=["legendselectchanged","legendselected","legendunselected","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected"],i=["click","dblclick","mouseover","mouseout","mousedown","mouseup","globalout"];e["default"]={props:["options","theme","initOptions","group"],data:function(){return{chart:null}},computed:{width:{cache:!1,getter:function(){return this.chart.getWidth()}},height:{cache:!1,getter:function(){return this.chart.getHeight()}},isDisposed:{cache:!1,getter:function(){return this.chart.isDisposed()}}},methods:{mergeOptions:function(t){this.chart.setOption(t)},resize:function(){this.chart.resize()},dispatchAction:function(t){this.chart.dispatchAction(t)},showLoading:function(){this.chart.showLoading()},hideLoading:function(){this.chart.hideLoading()},getDataURL:function(){return this.chart.getDataURL()},clear:function(){this.chart.clear()},dispose:function(){this.chart.dispose()}},ready:function(){var t=this,e=s["default"].init(this.$el,this.theme,this.initOptions);e.setOption(this.options),this.$watch("options",function(t){e.setOption(t,!0)},{deep:!0}),e.group=this.group,this.$watch("group",function(t){e.group=t}),r.forEach(function(a){e.on(a,function(e){t.$dispatch(a,e)})}),i.forEach(function(a){e.on(a,function(e){t.$dispatch("chart"+a,e)})}),this.chart=e},connect:function(t){"string"!=typeof t&&(t=t.map(function(t){return t.chart})),s["default"].connect(t)},disconnect:function(t){s["default"].connect(t)},registerMap:function(t,e,a){s["default"].registerMap(t,e,a)},registerTheme:function(t,e){s["default"].registerTheme(t,e)}}},164:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),a(459);var n=a(474),s=o(n),r=a(472),i=o(r),c=a(473),u=o(c);e["default"]={components:{"app-header":s["default"],"app-content":i["default"],"app-footer":u["default"]}}},165:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(475),s=o(n);e["default"]={components:{chart:s["default"]},props:{chartData:{type:Object,required:!0,"default":{}}}}},166:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(169),s=o(n),r=a(168),i=o(r),c=a(477),u=a(471),p=o(u),d="https://api.douban.com/v2",l="81245114",f="2016";e["default"]={components:{tab:c.tab,tabs:c.tabset,chart:p["default"]},created:function(){var t=this;t.setUser(),t.fetchBooks({},function(e){var a=t.formatDataForChart(e);console.log(a),t.setStatistics(a),t.setTagsInfo(a),t.setBooksChart(a),t.setBooksRatingsChart(a)},function(t){console.log(t)})},data:function(){return{booksTotal:0,user:{},firstRead:{},lastRead:{},readTime:{},years:[],tags:[],chartData:{statu:{},rating:{}},readYear:""}},ready:function(){},methods:{fetchBooks:function(t,e,a){var o=this,n={count:1};(0,i["default"])(n,t),o.getBook(n).then(function(n){for(var r=[],c=0,u=n.total;c<u;c+=100)r.push(c);var p=r.map(function(e){var a={start:e,count:100};return(0,i["default"])(a,t),o.$http.jsonp(d+"/book/user/"+l+"/collections",a).then(function(t){if(200===t.status)return t.data})});s["default"].all(p).then(function(t){for(var a={collections:[],total:0},o=0,s=t.length;o<s;o++)for(var r=t[o].collections,i=0,c=r.length;i<c;i++)a.collections.push(r[i]);a.total=n.total,e(a)})["catch"](function(t){a(t)})})},getBook:function(t){var e=this,a={count:100};(0,i["default"])(a,t);var o=new s["default"](function(t,o){e.$http.jsonp(d+"/book/user/"+l+"/collections",a).then(function(e){if(200===e.status){var a=e.data;a.current=a.start+a.count,t(a)}})["catch"](function(t){o(t)})});return o},setStatistics:function(t){var e=t[f].books.read,a=this,o={},n=0,s=e.length,r=e[s-1],i=e[0];o.firstReadDay=r.updated.substring(0,10),o.lastReadDay=i.updated.substring(0,10),n=new Date(o.lastReadDay).getTime()-new Date(o.firstReadDay).getTime(),o.allReadDay=n/864e5,o.averageDay=(o.allReadDay/s).toFixed(2),a.booksTotal=s,a.firstRead=r,a.lastRead=i,a.readTime=o,a.readYear=f},setBooksChart:function(t){var e={title:{text:f+"年度图书阅读统计",left:"center",bottom:25},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["在读","想读","已读"]},grid:{left:"0",width:"100%",containLabel:!0},xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value"}],series:[{name:"在读",type:"bar",data:t[f].status.reading},{name:"想读",type:"bar",data:t[f].status.wish},{name:"已读",type:"bar",data:t[f].status.read}]};this.chartData.statu=e},setBooksRatingsChart:function(t){var e={title:{text:f+"年度图书评价统计",left:"center",bottom:25},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["未评","一星","二星","三星","四星","五星"]},grid:{left:"0",width:"100%",containLabel:!0},xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value"}],series:[{name:"未评",type:"bar",stack:"星级评价",data:t[f].rating["no-rating"]},{name:"一星",type:"bar",stack:"星级评价",data:t[f].rating[1]},{name:"二星",type:"bar",stack:"星级评价",data:t[f].rating[2]},{name:"三星",type:"bar",stack:"星级评价",data:t[f].rating[3]},{name:"四星",type:"bar",stack:"星级评价",data:t[f].rating[4]},{name:"五星",type:"bar",stack:"星级评价",data:t[f].rating[5]}]};this.chartData.rating=e},formatDataForChart:function(t){var e=t.collections,a={};return e.forEach(function(t){var e=t.updated.substring(0,7).split("-"),o=e[0],n=Number(e[1]);a[o]||(a[o]={}),a[o].collections||(a[o].collections=[]),a[o].collections.push(t),a[o].books||(a[o].books={}),a[o].books[t.status]||(a[o].books[t.status]=[]),a[o].books[t.status].push(t),a[o].status||(a[o].status={}),a[o].status[t.status]||(a[o].status[t.status]=[]);for(var s=0;s<12;s++)a[o].status[t.status][s]||(a[o].status[t.status][s]=null);a[o].status[t.status][n-1]++,a[o].rating||(a[o].rating={}),t.rating||(t.rating={},t.rating.value="no-rating"),a[o].rating[t.rating.value]||(a[o].rating[t.rating.value]=[]);for(var r=0;r<12;r++)a[o].rating[t.rating.value][r]||(a[o].rating[t.rating.value][r]=null);a[o].rating[t.rating.value][n-1]++}),a},setUser:function(){var t=this;t.$http.jsonp(d+"/user/81245114").then(function(e){if(200===e.status){var a=e.data;if(!a)return!1;t.user=a}})},setTagsInfo:function(t){t=t[2016];var e=[],a=this;t.collections.forEach(function(t){var a=t.tags;a&&a.forEach(function(t){e.indexOf(t)===-1&&e.push(t)})}),a.tags=e}}}},167:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){return{msg:"Hello World!"}}}},459:function(t,e){},460:function(t,e){},461:function(t,e){},462:function(t,e){},463:function(t,e){},464:function(t,e){},465:function(t,e){t.exports=" <div class=echarts></div> "},466:function(t,e){t.exports=' <div id=app class=container style="max-width: 740px"> <app-content></app-content> </div> '},467:function(t,e){t.exports=' <chart :options=chartData _v-169fea5e=""></chart> '},468:function(t,e){t.exports=' <div class=content _v-47096779=""> <h2 _v-47096779="">{{ user.name }}的{{ readYear }}年豆瓣读书记录</h2> <div class=read-info _v-47096779=""> <p _v-47096779="">总阅读量：<strong _v-47096779="">{{ booksTotal }}</strong>本</p> <p _v-47096779="">总阅读时间：<strong _v-47096779="">{{ readTime.allReadDay }}</strong>天</p> <p _v-47096779="">第一本书：于<strong _v-47096779="">{{ readTime.firstReadDay }}</strong>读完《{{ firstRead.book &amp;&amp; firstRead.book.title }}》</p> <p _v-47096779="">最近阅读：于<strong _v-47096779="">{{ readTime.lastReadDay }}</strong>读完《{{ lastRead.book &amp;&amp; lastRead.book.title }}》</p> <p _v-47096779="">平均阅读时间：<strong _v-47096779="">{{ readTime.averageDay }}</strong>天/本</p> </div> <h2 _v-47096779="">#图表统计</h2>  <chart :chart-data=chartData.statu _v-47096779=""></chart> <chart :chart-data=chartData.rating _v-47096779=""></chart> <h2 _v-47096779="">#读书标签</h2> <div class=read-tags _v-47096779=""> <span class="tag label label-info" v-for="tag in tags" style="display: inline-block" _v-47096779="">{{ tag }}</span> </div> </div> '},469:function(t,e){t.exports=' <div class=hello _v-69263686=""> <h1 _v-69263686="">{{ msg }}</h1> </div> '},470:function(t,e,a){var o,n;a(461),o=a(164),n=a(466),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},471:function(t,e,a){var o,n;a(462),o=a(165),n=a(467),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},472:function(t,e,a){var o,n;a(463),o=a(166),n=a(468),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},473:function(t,e){var a,o;t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=o)},474:function(t,e,a){var o,n;a(464),o=a(167),n=a(469),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},475:function(t,e,a){var o,n;a(460),o=a(163),n=a(465),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)}});
//# sourceMappingURL=app.1f5798d553fae4dc2a36.js.map